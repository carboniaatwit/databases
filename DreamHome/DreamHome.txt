-- Drop tables

DROP TABLE IF EXISTS VIEWING_t;
DROP TABLE IF EXISTS REGISTRATION_t;
DROP TABLE IF EXISTS CLIENT_t;
DROP TABLE IF EXISTS PROPERTY_t;
DROP TABLE IF EXISTS STAFF_t;
DROP TABLE IF EXISTS BRANCH_t;
DROP TABLE IF EXISTS PRIVATE_OWNER_t;

-- Create tables

CREATE TABLE BRANCH_t
(
    Branch_Number VARCHAR(5) NOT NULL,
    Branch_Street VARCHAR(30),
    Branch_City VARCHAR(30),
    Branch_Postcode VARCHAR(30),

    CONSTRAINT BRANCH_PK PRIMARY KEY (Branch_Number)
);

CREATE TABLE STAFF_t
(
    Staff_Number VARCHAR(5) NOT NULL,
    Staff_FName VARCHAR(30),
    Staff_LName VARCHAR(30),
    Staff_Position VARCHAR(30),
    Staff_Sex CHAR,
    Staff_DOB DATE,
    Staff_Salary INT,
    Branch_Number VARCHAR(5) NOT NULL,

    CONSTRAINT STAFF_PK PRIMARY KEY (Staff_Number),
    CONSTRAINT STAFF_FK1 FOREIGN KEY (Branch_Number) REFERENCES BRANCH_t(Branch_Number)
);

CREATE TABLE PRIVATE_OWNER_t
(
    Owner_Number VARCHAR(5) NOT NULL,
    Owner_FName VARCHAR(30),
    Owner_LName VARCHAR(30),
    Owner_Address VARCHAR(30),
    Owner_TelNo VARCHAR(30),

    CONSTRAINT PRIVATE_OWNER_PK PRIMARY KEY (Owner_Number)
);

CREATE TABLE PROPERTY_t
(
    Property_Number VARCHAR(5) NOT NULL,
    Property_Street VARCHAR(30),
    Property_City VARCHAR(30),
    Property_Postcode VARCHAR(30),
    Property_Type VARCHAR(30),
    Property_Rooms INT,
    Property_Rent INT,
    Owner_Number VARCHAR(5) NOT NULL,
    Staff_Number VARCHAR(5),
    Branch_Number VARCHAR(5) NOT NULL,

    CONSTRAINT PROPERTY_PK PRIMARY KEY (Property_Number),
    CONSTRAINT PROPERTY_FK1 FOREIGN KEY (Owner_Number) REFERENCES PRIVATE_OWNER_t(Owner_Number),
    CONSTRAINT PROPERTY_FK2 FOREIGN KEY (Staff_Number) REFERENCES STAFF_t(Staff_Number),
    CONSTRAINT PROPERTY_FK3 FOREIGN KEY (Branch_Number) REFERENCES BRANCH_t(Branch_Number)
);

CREATE TABLE CLIENT_t
(
    Client_Number VARCHAR(5) NOT NULL,
    Client_FName VARCHAR(30),
    Client_LName VARCHAR(30),
    Client_TelNo VARCHAR(30),
    Client_PrefType VARCHAR(30),
    Client_MaxRent VARCHAR(30),

    CONSTRAINT CLIENT_PK PRIMARY KEY (Client_Number)
);

CREATE TABLE VIEWING_t
(
    Client_Number VARCHAR(5) NOT NULL,
    Property_Number VARCHAR(5) NOT NULL,
    Viewing_ViewDate DATE,
    Viewing_Comment VARCHAR(30),

    CONSTRAINT VIEWING_PK PRIMARY KEY (Client_Number, Property_Number),
    CONSTRAINT VIEWING_FK1 FOREIGN KEY (Client_Number) REFERENCES CLIENT_t(Client_Number),
    CONSTRAINT VIEWING_FK2 FOREIGN KEY (Property_Number) REFERENCES PROPERTY_t(Property_Number)
);

CREATE TABLE REGISTRATION_t
(
    Client_Number VARCHAR(5) NOT NULL,
    Branch_Number VARCHAR(5) NOT NULL,
    Staff_Number VARCHAR(5) NOT NULL,
    Registration_DateJoined DATE,

    CONSTRAINT REGISTRATION_PK PRIMARY KEY (Client_Number, Branch_Number, Staff_Number),
    CONSTRAINT REGISTRATION_FK1 FOREIGN KEY (Client_Number) REFERENCES CLIENT_t(Client_Number),
    CONSTRAINT REGISTRATION_FK2 FOREIGN KEY (Branch_Number) REFERENCES BRANCH_t(Branch_Number),
    CONSTRAINT REGISTRATION_FK3 FOREIGN KEY (Staff_Number) REFERENCES STAFF_t(Staff_Number)

);

-- Do insertions